<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Document Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <style>
    @keyframes fadeInScale {
      0% {
        opacity: 0;
        transform: scale(0.95);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
    .animate-fadeInScale {
      animation: fadeInScale 0.4s ease forwards;
    }
    .verified-badge {
      display: inline-flex;
      align-items: center;
      background-color: #22c55e; /* green-500 */
      color: white;
      font-weight: 600;
      font-size: 0.75rem;
      padding: 0.125rem 0.5rem;
      border-radius: 9999px;
      gap: 0.25rem;
      user-select: none;
    }
    .btn-pdf {
      background-color: #004a99;
      color: white;
      font-weight: 600;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    .btn-pdf:hover {
      background-color: #003366;
    }
  </style>
</head>
<body class="bg-[#f7f9fc] min-h-screen font-sans">
  <div class="max-w-7xl mx-auto p-6">
    <div id="page1" class="bg-white rounded-md shadow-sm p-6">
      <h2 class="text-gray-700 font-semibold text-lg mb-4 border-b border-gray-300 pb-2">
        DOCUMENTS VERIFICATION
      </h2>
      <form id="formPage1">
        <label
          for="verificationType"
          class="block text-gray-700 text-sm mb-1"
          >Verification Type <span class="text-red-600">*</span></label
        >
        <select
          id="verificationType"
          name="verificationType"
          class="w-72 border border-gray-400 rounded-md px-3 py-2 mb-1 text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
          required
        >
          <option value="">Select Verification Type</option>
          <option value="degree">Degree Attestation Verification</option>
        </select>
        <p class="text-xs text-gray-600 mb-6">Please select Verification Type</p>
        <div class="flex space-x-4">
          <button
            type="button"
            class="border border-gray-300 rounded-md px-8 py-3 text-red-600 font-semibold hover:bg-gray-50 transition"
            id="closeBtn"
          >
            CLOSE
          </button>
          <button
            type="submit"
            class="bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md px-8 py-3 shadow-md"
          >
            GO
          </button>
        </div>
      </form>
    </div>

    <div id="page2" class="hidden bg-white rounded-md shadow-sm p-6">
      <h2 class="text-gray-700 font-semibold text-lg mb-4 border-b border-gray-300 pb-2 flex items-center justify-between">
        DOCUMENTS VERIFICATION - Step 2
        <span class="verified-badge" title="Verified Record" aria-label="Verified Record">
          <i class="fas fa-check-circle"></i> Verified
        </span>
      </h2>
      <form id="formPage2" class="mb-6">
        <div class="mb-4">
          <label for="documentType" class="block text-gray-700 text-sm mb-1"
            >Document Type <span class="text-red-600">*</span></label
          >
          <select
            id="documentType"
            name="documentType"
            class="w-72 border border-gray-400 rounded-md px-3 py-2 text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
            required
          >
            <option value="">Select Document Type</option>
            <option value="photocopy">Photocopy</option>
            <option value="original">Original</option>
          </select>
        </div>

        <div class="mb-4">
          <label for="cnic" class="block text-gray-700 text-sm mb-1"
            >CNIC <span class="text-red-600">*</span></label
          >
          <input
            type="text"
            id="cnic"
            name="cnic"
            placeholder="Enter CNIC"
            class="w-72 border border-gray-400 rounded-md px-3 py-2 text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
            required
          />
        </div>

        <div class="mb-6">
          <label for="stampNumber" class="block text-gray-700 text-sm mb-1"
            >Stamp Number <span class="text-red-600">*</span></label
          >
          <input
            type="text"
            id="stampNumber"
            name="stampNumber"
            placeholder="Enter Stamp Number"
            class="w-72 border border-gray-400 rounded-md px-3 py-2 text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
            required
          />
        </div>

        <div class="flex space-x-4 mb-6">
          <button
            type="button"
            class="border border-gray-300 rounded-md px-8 py-3 text-red-600 font-semibold hover:bg-gray-50 transition"
            id="backBtn"
          >
            BACK
          </button>
          <button
            type="submit"
            class="bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md px-8 py-3 shadow-md"
          >
            SUBMIT
          </button>
        </div>
      </form>

      <div id="searchResult" class="hidden border border-gray-300 rounded-md p-6 bg-gray-50 shadow-md animate-fadeInScale relative">
        <h3 class="text-gray-700 font-semibold text-lg mb-4 flex items-center gap-2">
          <i class="fas fa-user-graduate text-green-600"></i> Student Record
        </h3>
        <table class="w-full text-left text-sm text-gray-700 border-collapse">
          <tbody>
            <tr class="border-b border-gray-300">
              <th class="py-3 pr-4 font-medium w-40" style="">Name:</th>
              <td id="studentName" class="text-gray-900 font-semibold">Ali Khan</td>
            </tr>
            <tr class="border-b border-gray-300">
              <th class="py-3 pr-4 font-medium" style="">CNIC:</th>
              <td id="studentCNIC" class="text-gray-900 font-semibold" style="">35202-1234567-1</td>
            </tr>
            <tr class="border-b border-gray-300">
              <th class="py-3 pr-4 font-medium">Father's Name:</th>
              <td id="studentFatherName" class="text-gray-900 font-semibold">Khan Muhammad</td>
            </tr>
            <tr class="border-b border-gray-300">
              <th class="py-3 pr-4 font-medium">Father's CNIC:</th>
              <td id="studentFatherCNIC" class="text-gray-900 font-semibold">35202-7654321-0</td>
            </tr>
            <tr class="border-b border-gray-300">
              <th class="py-3 pr-4 font-medium">Degree:</th>
              <td id="studentDegree" class="text-gray-900 font-semibold">Bachelor of Science in Computer Science</td>
            </tr>
            <tr class="border-b border-gray-300">
              <th class="py-3 pr-4 font-medium">CGPA:</th>
              <td id="studentCGPA" class="text-gray-900 font-semibold">3.75</td>
            </tr>
            <tr class="border-b border-gray-300">
              <th class="py-3 pr-4 font-medium">Document Type:</th>
              <td id="studentDocType" class="text-gray-900 font-semibold">Original</td>
            </tr>
            <tr>
              <th class="py-3 pr-4 font-medium">Stamp Number:</th>
              <td id="studentStamp" class="text-gray-900 font-semibold">ST123456</td>
            </tr>
          </tbody>
        </table>
        <div class="mt-4 flex items-center gap-2 text-green-700 font-semibold">
          <i class="fas fa-check-circle text-xl"></i>
          <span>This record is verified and authentic.</span>
        </div>
        <button id="downloadPdfBtn" class="btn-pdf mt-6" aria-label="Download PDF">
          <i class="fas fa-file-pdf"></i> Download PDF
        </button>
      </div>

      <div id="noRecord" class="hidden text-red-600 font-semibold text-center mt-4">
        <i class="fas fa-exclamation-triangle mr-2"></i>No record found for the entered CNIC.
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const { jsPDF } = window.jspdf;

    const formPage1 = document.getElementById("formPage1");
    const formPage2 = document.getElementById("formPage2");
    const page1 = document.getElementById("page1");
    const page2 = document.getElementById("page2");
    const backBtn = document.getElementById("backBtn");
    const closeBtn = document.getElementById("closeBtn");

    const searchResult = document.getElementById("searchResult");
    const noRecord = document.getElementById("noRecord");
    const downloadPdfBtn = document.getElementById("downloadPdfBtn");

    const studentNameEl = document.getElementById("studentName");
    const studentCNICEl = document.getElementById("studentCNIC");
    const studentFatherNameEl = document.getElementById("studentFatherName");
    const studentFatherCNICEl = document.getElementById("studentFatherCNIC");
    const studentDegreeEl = document.getElementById("studentDegree");
    const studentCGPAEl = document.getElementById("studentCGPA");
    const studentDocTypeEl = document.getElementById("studentDocType");
    const studentStampEl = document.getElementById("studentStamp");

    // Expanded student records with more entries and new fields
    const students = [
      {
        cnic: "17601-0579283-9",
        name: "Tahir Iqbal",
        fatherName: "Muhammad Aliyas",
        fatherCNIC: "71201-2978712-3",
        degree: "Master Of Physical Education (M.P.Ed)",
        cgpa: "3.8",
        documentType: "Original",
        stampNumber: "ST667352",
      },
      {
        cnic: "42101-7654321-9",
        name: "Fatima Zahra",
        fatherName: "Zahra Hussain",
        fatherCNIC: "42101-1234567-8",
        degree: "Master of Business Administration",
        cgpa: "3.90",
        documentType: "Photocopy",
        stampNumber: "ST987654",
      },
      {
        cnic: "61101-1122334-5",
        name: "Ahmed Raza",
        fatherName: "Raza Ali",
        fatherCNIC: "61101-9988776-4",
        degree: "Bachelor of Engineering in Electrical",
        cgpa: "3.60",
        documentType: "Original",
        stampNumber: "ST456789",
      },
      {
        cnic: "35202-9988776-3",
        name: "Sara Malik",
        fatherName: "Malik Aslam",
        fatherCNIC: "35202-3344556-2",
        degree: "Bachelor of Arts in English Literature",
        cgpa: "3.85",
        documentType: "Photocopy",
        stampNumber: "ST112233",
      },
      {
        cnic: "42101-3344556-7",
        name: "Hassan Ali",
        fatherName: "Ali Raza",
        fatherCNIC: "42101-6677889-6",
        degree: "Master of Science in Physics",
        cgpa: "3.95",
        documentType: "Original",
        stampNumber: "ST445566",
      },
      {
        cnic: "61101-5566778-9",
        name: "Ayesha Siddiqui",
        fatherName: "Siddiqui Imran",
        fatherCNIC: "61101-2233445-8",
        degree: "Bachelor of Commerce",
        cgpa: "3.70",
        documentType: "Photocopy",
        stampNumber: "ST778899",
      },
      {
        cnic: "35202-2233445-0",
        name: "Bilal Ahmed",
        fatherName: "Ahmed Rafiq",
        fatherCNIC: "35202-5566778-9",
        degree: "Master of Computer Science",
        cgpa: "3.80",
        documentType: "Original",
        stampNumber: "ST334455",
      },
      {
        cnic: "42101-6677889-1",
        name: "Zainab Noor",
        fatherName: "Noor Hassan",
        fatherCNIC: "42101-8899001-0",
        degree: "Bachelor of Medicine, Bachelor of Surgery",
        cgpa: "3.92",
        documentType: "Original",
        stampNumber: "ST556677",
      },
      {
        cnic: "61101-8899001-2",
        name: "Omar Farooq",
        fatherName: "Farooq Ahmed",
        fatherCNIC: "61101-1122334-1",
        degree: "Bachelor of Architecture",
        cgpa: "3.65",
        documentType: "Photocopy",
        stampNumber: "ST990011",
      }
    ];

    formPage1.addEventListener("submit", (e) => {
      e.preventDefault();
      // Validate selection
      const verificationType = document.getElementById("verificationType").value;
      if (!verificationType) return;
      page1.classList.add("hidden");
      page2.classList.remove("hidden");
    });

    backBtn.addEventListener("click", () => {
      page2.classList.add("hidden");
      page1.classList.remove("hidden");
      clearResults();
    });

    closeBtn.addEventListener("click", () => {
      // Reset form and stay on page 1
      formPage1.reset();
      formPage2.reset();
      clearResults();
    });

    formPage2.addEventListener("submit", (e) => {
      e.preventDefault();

      const cnicInput = document.getElementById("cnic").value.trim();
      const docTypeInput = document.getElementById("documentType").value;
      const stampInput = document.getElementById("stampNumber").value.trim();

      // Search student by CNIC, document type, and stamp number (case insensitive for doc type and stamp)
      const student = students.find(
        (s) =>
          s.cnic === cnicInput &&
          s.documentType.toLowerCase() === docTypeInput.toLowerCase() &&
          s.stampNumber.toLowerCase() === stampInput.toLowerCase()
      );

      if (student) {
        noRecord.classList.add("hidden");
        searchResult.classList.remove("hidden");
        // Trigger reflow to restart animation
        searchResult.classList.remove("animate-fadeInScale");
        void searchResult.offsetWidth;
        searchResult.classList.add("animate-fadeInScale");

        studentNameEl.textContent = student.name;
        studentCNICEl.textContent = student.cnic;
        studentFatherNameEl.textContent = student.fatherName;
        studentFatherCNICEl.textContent = student.fatherCNIC;
        studentDegreeEl.textContent = student.degree;
        studentCGPAEl.textContent = student.cgpa;
        studentDocTypeEl.textContent = student.documentType;
        studentStampEl.textContent = student.stampNumber;
      } else {
        searchResult.classList.add("hidden");
        noRecord.classList.remove("hidden");
      }
    });

    function clearResults() {
      searchResult.classList.add("hidden");
      noRecord.classList.add("hidden");
      studentNameEl.textContent = "";
      studentCNICEl.textContent = "";
      studentFatherNameEl.textContent = "";
      studentFatherCNICEl.textContent = "";
      studentDegreeEl.textContent = "";
      studentCGPAEl.textContent = "";
      studentDocTypeEl.textContent = "";
      studentStampEl.textContent = "";
    }

    downloadPdfBtn.addEventListener("click", () => {
      if (searchResult.classList.contains("hidden")) return;

      const doc = new jsPDF();

      // Header
      doc.setFontSize(16);
      doc.setTextColor("#004a99");
      doc.setFont("helvetica", "bold");
      doc.text("Government of Pakistan", 105, 20, null, null, "center");
      doc.setFontSize(12);
      doc.setTextColor("#222");
      doc.text("Degree Verification Portal", 105, 28, null, null, "center");
      doc.setDrawColor("#004a99");
      doc.setLineWidth(0.8);
      doc.line(20, 32, 190, 32);

      // Student Record Title
      doc.setFontSize(14);
      doc.setTextColor("#22c55e");
      doc.setFont("helvetica", "bold");
      doc.text("Student Record", 20, 45);

      // Data
      doc.setFontSize(12);
      doc.setTextColor("#000");
      doc.setFont("helvetica", "normal");

      const startY = 55;
      const lineHeight = 8;
      const labelX = 20;
      const valueX = 80;

      const data = [
        { label: "Name:", value: studentNameEl.textContent },
        { label: "CNIC:", value: studentCNICEl.textContent },
        { label: "Father's Name:", value: studentFatherNameEl.textContent },
        { label: "Father's CNIC:", value: studentFatherCNICEl.textContent },
        { label: "Degree:", value: studentDegreeEl.textContent },
        { label: "CGPA:", value: studentCGPAEl.textContent },
        { label: "Document Type:", value: studentDocTypeEl.textContent },
        { label: "Stamp Number:", value: studentStampEl.textContent },
      ];

      data.forEach((item, i) => {
        doc.setFont(undefined, "bold");
        doc.text(item.label, labelX, startY + i * lineHeight);
        doc.setFont(undefined, "normal");
        doc.text(item.value, valueX, startY + i * lineHeight);
      });

      // Verified footer
      doc.setTextColor("#22c55e");
      doc.setFont("helvetica", "bold");
      doc.text("This record is verified and authentic.", 20, startY + data.length * lineHeight + 10);

      // Save PDF
      doc.save("degree_verification_record.pdf");
    });
  </script>
</body>
</html>